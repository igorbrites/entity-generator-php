{% autoescape false %}
<?php
{% if config.namespace %}
namespace {{ config.namespace }};
{% endif %}

/**
 * Class {{ entity.name }}Test
 *
 * This test class was generated by
 * (Igor Brites' Entity Generator)[https://packagist.org/packages/igorbrites/entity-generator].
 * Please be careful changing it.
 *
 * @since {{ "now"|date("c") }}
{% if config.namespace %}
 * @package {{ config.namespace }}
{% endif %}
 */
class {{ entity.name }}Test extends \PHPUnit_Framework_TestCase
{
    /**
     * @var {{ entity.name }}
     */
    protected $object;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp()
    {
        $this->object = new {{ entity.name }}();
    }

{% for field in entity.fields %}
    {% if field.provider %}

    /**
     * @dataProvider {{ field.provider }}
     * @covers       {% if config.namespace %}{{ config.namespace }}\{% endif %}{{ entity.name }}::set{{ field.ucName }}
     *
     * @param $test
     * @param $expected
     *
     * @throws \InvalidArgumentException
     */
    public function testSet{{ field.ucName }}($test, $expected)
    {
        if ($expected instanceof \InvalidArgumentException) {
            $this->setExpectedException(get_class($expected));
        }

        $this->object->set{{ field.ucName }}($test);
        $this->assertSame($expected, $this->object->get{{ field.ucName }}());
    }
    {% endif %}
{% endfor %}

    public function providerPrimaryKey()
    {
        $e = new \InvalidArgumentException();

        return [
            [10, 10, 'Int'],
            [2.35, $e, 'Float'],
            ['10', 10, 'Valid String'],
            ['Ok', $e, 'Invalid String'],
            [false, $e, 'Boolean'],
            [null, $e, 'Null'],
            [0, $e, 'Zero']
        ];
    }

    public function providerIntegerNotNull()
    {
        $e = new \InvalidArgumentException();

        return [
            [10, 10, 'Int'],
            [2.35, $e, 'Float'],
            ['10', 10, 'Valid String'],
            ['Ok', $e, 'Invalid String'],
            [false, $e, 'Boolean'],
            [null, $e, 'Null']
        ];
    }

    public function providerIntegerNullable()
    {
        $e = new \InvalidArgumentException();

        return [
            [10, 10, 'Int'],
            [null, null, 'Null'],
            [2.35, $e, 'Float'],
            ['10', 10, 'Valid String'],
            ['Ok', $e, 'Invalid String'],
            [false, $e, 'Boolean']
        ];
    }

    public function providerStringNotNull()
    {
        $e = new \InvalidArgumentException();
        $obj = new TestObject();

        return [
            ['Ok', 'Ok', 'Valid String'],
            ['10', '10', 'Valid Numeric String'],
            [10, '10', 'Int'],
            [2.35, '2.35', 'Float'],
            [false, $e, 'Boolean'],
            [null, $e, 'Null'],
            [[], $e, 'Array'],
            [new \stdClass(), $e, 'Invalid Object'],
            [$obj, "$obj", 'Valid Object'],
            [0, '0', 'Zero']
        ];
    }

    public function providerStringNullable()
    {
        $e = new \InvalidArgumentException();
        $obj = new TestObject();

        return [
            ['Ok', 'Ok', 'Valid String'],
            ['10', '10', 'Valid Numeric String'],
            [10, '10', 'Int'],
            [2.35, '2.35', 'Float'],
            [false, $e, 'Boolean'],
            [null, null, 'Null'],
            [[], $e, 'Array'],
            [new \stdClass(), $e, 'Invalid Object'],
            [$obj, "$obj", 'Valid Object'],
            [0, '0', 'Zero']
        ];
    }

    public function providerFloatNotNull()
    {
        $e = new \InvalidArgumentException();

        return [
            [2.35, 2.35, 'Float'],
            [null, $e, 'Null'],
            ['Ok', $e, 'Valid String'],
            ['10', 10.0, 'Invalid Numeric String'],
            [10, 10.0, 'Int'],
            [false, $e, 'Boolean'],
            [0, 0.0, 'Zero']
        ];
    }

    public function providerFloatNullable()
    {
        $e = new \InvalidArgumentException();

        return [
            [2.35, 2.35, 'Float'],
            [null, null, 'Null'],
            ['Ok', $e, 'Valid String'],
            ['10', 10.0, 'Invalid Numeric String'],
            [10, 10.0, 'Int'],
            [false, $e, 'Boolean'],
            [0, 0.0, 'Zero']
        ];
    }

    public function providerEnumNotNull()
    {
        $e = new \InvalidArgumentException();

        return [
            ['Ok', $e, 'Invalid option for Enum'],
            [null, $e, 'Null'],
        ];
    }

    public function providerEnumNullable()
    {
        $e = new \InvalidArgumentException();

        return [
            ['Ok', $e, 'Invalid option for Enum'],
            [null, null, 'Null'],
        ];
    }
}

if (!class_exists('\{% if config.namespace %}{{ config.namespace }}\{% endif %}TestObject')) {
    class TestObject
    {
        public function __toString()
        {
            return 'Ok';
        }
    }
}
{% endautoescape %}